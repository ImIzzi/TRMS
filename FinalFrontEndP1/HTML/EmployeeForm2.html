<!DOCTYPE html>
<html lang="en">

<head>
   <title>Form</title>
   <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta3/dist/css/bootstrap.min.css" rel="stylesheet" 
   integrity="sha384-eOJMYsd53ii+scO/bJGFsiCZc+5NDVN2yr8+0RDqr0Ql0h+rP48ckxlpbzKgwra6" crossorigin="anonymous">
</head>

<body>

    <h1 style="margin-left: 10px;">Reimbursment Form</h1>

    <div div="container">
        <table class="table table-striped table-bordered">
            <tr>
                <th>Information Required</th>
                <th>Inputs</th>
            </tr>
            <tr>
                <td>First Name</td>
                <td><input id="fname" type="text"></td>
            </tr>
            <tr>
                <td>Last Name</td>
                <td><input id="lname" type="text"></td>
            </tr>
            <tr>
                <td>Event Date</td>
                <td><input id="eventDate" type="text"></td>
            </tr>
            <tr>
                <td>Event Time</td>
                <td><input id="eventTime" type="text"></td>
            </tr>
            <tr>
                <td>Location</td>
                <td><input id="location" type="text"></td>
            </tr>
            <tr>
                <td>Description of Event</td>
                <td><input id="description" type="text"></td>
            </tr>
            <tr>
                <td>Event Cost</td>
                <td><input id="cost" type="number" min="0"></td>
            </tr>
            <tr>
                <td>Grading Format</td>
                <td><input id="gradingFormat" type="text"></td>
            </tr>
            <tr>
                <td>Type of Event</td>
                <td><input id="typeOfEvent" type="text"></td>
            </tr>
            <tr>
                <td>Employee ID</td>
                <td><input id="employeeId" type="number"></td>
            </tr>
            <tr>
                <td>Final Grade</td>
                <td><input id="finalGrade" type="text"></td>
            </tr>
            <tr>
                <td>Work Justification</td>
                <td><input id="workJust" type="text"></td>
            </tr>
        </table>
    </div>

    <button id="submitButton" style="margin-left: 8px;" onclick="submitForm()">Submit Form</button>
    
</body>
<!-- This Is the function that will submit the form to the Database-->
<script>

    async function submitForm() {
 
        console.log("Submitting Form....")

        const fnameVal = document.getElementById("fname").value 
        const lnameVal = document.getElementById("lname").value 
        const eventDateVal = document.getElementById("eventDate").value 
        const eventTimeVal = document.getElementById("eventTime").value 
        const locationVal = document.getElementById("location").value 
        const descriptionVal = document.getElementById("description").value 
        const costVal = document.getElementById("cost").value 
        const gradingFormatVal = document.getElementById("gradingFormat").value 
        const typeOfEventVal = document.getElementById("typeOfEvent").value 
        const employeeIdVal = document.getElementById("employeeId").value 
        const finalGradeVal = document.getElementById("finalGrade").value 
        const workJustVal = document.getElementById("workJust").value 

        console.log(fnameVal)
        console.log(lnameVal)
        console.log(eventDateVal)
        console.log(eventTimeVal)
        console.log(locationVal)
        console.log(descriptionVal)
        console.log(costVal)
        console.log(gradingFormatVal)
        console.log(typeOfEventVal)
        console.log(employeeIdVal)
        console.log(finalGradeVal)
        console.log(workJustVal)

        const data = {
            fname: fnameVal,
            lname: lnameVal,
            eventDate: eventDateVal,
            eventTime: eventTimeVal,
            location: locationVal,
            description: descriptionVal,
            cost: costVal,
            gradingFormat: gradingFormatVal,
            typeOfEvent: typeOfEventVal,
            employeeId: employeeIdVal,
            finalGrade: finalGradeVal,
            workJust: workJustVal
        }

        const url = "http://localhost:5000/login/submit/form"

        const httpResponse = await fetch(url, {
            method: "POST",
            headers: {
                'Content-Type': 'application/json'
            },
            body: JSON.stringify(data)
        });

        const body = await httpResponse.json();

        console.log(body);
        if(body) {
            alert("Form Successfuly Submitted!")
        } else {
            alert("Form Failed to be submitted.")
        }

    }

</script>

</html>